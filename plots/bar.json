{
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"width": "container",
	"height": 400,
	"title": null,
	"data": { "values": [] },
	"transform": [
		{
			"window": [{ "op": "rank", "as": "rank" }],
			"sort": [{ "field": "population", "order": "descending" }]
		},
		{ "filter": "datum.rank <= 15" }
	],
	"mark": { "type": "bar", "cursor": "pointer" },
	"encoding": {
		"y": {
			"field": "country",
			"type": "nominal",
			"sort": "-x",
			"axis": { "title": null }
		},
		"x": {
			"field": "population",
			"type": "quantitative",
			"axis": { "title": "Population", "format": ".2s" }
		},
		"color": {
			"field": "continent",
			"type": "nominal",
			"scale": { "scheme": "category10" },
			"legend": { "title": "Continent" }
		},
		"opacity": {
			"condition": { "selection": "country_select", "value": 1 },
			"value": 0.3
		},
		"tooltip": [
			{ "field": "country", "type": "nominal", "title": "Country" },
			{ "field": "population", "type": "quantitative", "title": "Population", "format": "," },
			{ "field": "continent", "type": "nominal", "title": "Continent" }
		]
	},
	"selection": {
		"country_select": {
			"type": "multi",
			"fields": ["country"],
			"on": "click"
		}
	}
}
