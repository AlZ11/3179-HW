{
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"width": "container",
	"height": 400,
	"title": null,
	"data": { "url": "https://raw.githubusercontent.com/AlZ11/3179-HW/main/data/world_population.csv" },
	"transform": [
		{
			"window": [{ "op": "rank", "as": "rank" }],
			"sort": [{ "field": "population", "order": "descending" }]
		},
		{ "filter": "datum.rank <= 15" }
	],
	"params": [
		{
			"name": "country_select",
			"select": { "type": "point", "fields": ["country"] }
		}
	],
	"mark": { "type": "bar", "cursor": "pointer" },
	"encoding": {
		"y": {
			"field": "country",
			"type": "nominal",
			"sort": { "encoding": "x", "order": "descending" },
			"axis": { "title": null }
		},
		"x": {
			"field": "population",
			"type": "quantitative",
			"axis": { "title": "Population", "format": ".2s" }
		},
		"color": {
			"field": "continent",
			"type": "nominal",
			"scale": { "scheme": "category10" },
			"legend": { "title": "Continent" }
		},
		"opacity": {
			"condition": { "param": "country_select", "value": 1 },
			"value": 0.3
		},
		"tooltip": [
			{ "field": "country", "type": "nominal", "title": "Country" },
			{ "field": "population", "type": "quantitative", "title": "Population", "format": "," },
			{ "field": "continent", "type": "nominal", "title": "Continent" }
		]
	}
}
