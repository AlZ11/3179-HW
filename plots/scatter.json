{
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"width": "container",
	"height": 500,
	"title": null,
	"data": { "url": "https://raw.githubusercontent.com/AlZ11/3179-HW/main/data/demographics.csv" },
	"mark": { "type": "circle", "opacity": 0.8, "stroke": "white", "strokeWidth": 0.5 },
	"encoding": {
		"x": {
			"field": "gdp_per_capita",
			"type": "quantitative",
			"scale": { "type": "log" },
			"axis": { "title": "GDP per Capita (USD, log scale)", "format": "$,.0f" }
		},
		"y": {
			"field": "life_expectancy",
			"type": "quantitative",
			"scale": { "domain": [40, 90] },
			"axis": { "title": "Life Expectancy (years)" }
		},
		"size": {
			"field": "population",
			"type": "quantitative",
			"scale": { "range": [50, 2000] },
			"legend": { "title": "Population", "format": ".2s" }
		},
		"color": {
			"condition": {
				"param": "continent_select",
				"field": "continent",
				"type": "nominal",
				"scale": {
					"domain": ["Africa", "Asia", "Europe", "North America", "South America", "Oceania"],
					"range": ["#e41a1c", "#377eb8", "#4daf4a", "#984ea3", "#ff7f00", "#a65628"]
				},
				"legend": { "title": "Continent" }
			},
			"value": "#d3d3d3"
		},
		"opacity": {
			"condition": [
				{ "param": "continent_select", "value": 1 },
				{ "param": "country_select", "value": 1 }
			],
			"value": 0.05
		},
		"strokeWidth": {
			"condition": [
				{ "param": "continent_select", "value": 1.5 },
				{ "param": "country_select", "value": 2 }
			],
			"value": 0.5
		},
		"tooltip": [
			{ "field": "country", "type": "nominal", "title": "Country" },
			{ "field": "continent", "type": "nominal", "title": "Continent" },
			{ "field": "population", "type": "quantitative", "title": "Population", "format": "," },
			{ "field": "gdp_per_capita", "type": "quantitative", "title": "GDP per Capita", "format": "$,.0f" },
			{ "field": "life_expectancy", "type": "quantitative", "title": "Life Expectancy", "format": ".1f" }
		]
	},
	"params": [
		{
			"name": "continent_select",
			"select": { "type": "point", "fields": ["continent"] },
			"bind": "legend"
		},
		{
			"name": "country_select",
			"select": { "type": "point", "fields": ["country"], "on": "click" }
		}
	]
}
