{
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"width": "container",
	"height": 500,
	"title": null,
	"data": { "values": [] },
	"mark": { "type": "circle", "opacity": 0.7 },
	"encoding": {
		"x": {
			"field": "gdp_per_capita",
			"type": "quantitative",
			"scale": { "type": "log" },
			"axis": { "title": "GDP per Capita (USD, log scale)", "format": "$,.0f" }
		},
		"y": {
			"field": "life_expectancy",
			"type": "quantitative",
			"scale": { "domain": [40, 90] },
			"axis": { "title": "Life Expectancy (years)" }
		},
		"size": {
			"field": "population",
			"type": "quantitative",
			"scale": { "range": [50, 2000] },
			"legend": { "title": "Population", "format": ".2s" }
		},
		"color": {
			"field": "continent",
			"type": "nominal",
			"scale": { "scheme": "category10" },
			"legend": { "title": "Continent" }
		},
		"opacity": {
			"condition": [
				{ "selection": "continent_select", "value": 0.8 },
				{ "selection": "country_select", "value": 1 }
			],
			"value": 0.1
		},
		"tooltip": [
			{ "field": "country", "type": "nominal", "title": "Country" },
			{ "field": "continent", "type": "nominal", "title": "Continent" },
			{ "field": "population", "type": "quantitative", "title": "Population", "format": "," },
			{ "field": "gdp_per_capita", "type": "quantitative", "title": "GDP per Capita", "format": "$,.0f" },
			{ "field": "life_expectancy", "type": "quantitative", "title": "Life Expectancy", "format": ".1f" }
		]
	},
	"selection": {
		"continent_select": {
			"type": "multi",
			"fields": ["continent"],
			"bind": "legend"
		},
		"country_select": {
			"type": "multi",
			"fields": ["country"]
		}
	}
}
